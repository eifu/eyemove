<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Visualization</title>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <style>
  </style>
</head>
<body>
<div id="x_value"></div>
<label for="x_value">X value with respect to time</label>
<div id="y_value"></div>
<label for="y_value">Y value with respect to time</label>
<script>
var margin = {top:0, right:0,bottom:20, left:50},
    width = 700,
    height = 700,
    barPadding = 1,
    label_index=0,
    diff = 0;


var xScale = d3.scale.linear()
.range([0, width]);

var yScale_forX = d3.scale.linear()
.range([0, height/2]);

var yScale_forY = d3.scale.linear()
.range([0, height/2]);

var valueline_forX = d3.svg.line()
    .x(function(d) { return xScale(d.id); })
    .y(function(d) { return yScale_forX(d.X); })
    .interpolate("basis");

var valueline_forY = d3.svg.line()
    .x(function(d) { return xScale(d.id); })
    .y(function(d) { return yScale_forY(d.Y); })
    .interpolate("basis");

var svg_Xvalue = d3.select("#x_value")
              .append("svg")
              .attr("width", width)
              .attr("height", height/2);

var svg_Yvalue = d3.select("#y_value")
              .append("svg")
              .attr("width", width)
              .attr("height", height/2); 

d3.json("data.json", function(error, data) {
  if (error) throw error;

  var data_foruse = [];
  
  data.forEach(function(d){
    data_foruse.push({
      X: +d["ValidatedCircle"]["X"],
      Y: +d["ValidatedCircle"]["Y"],
      R: +d["ValidatedCircle"]["R"],
      id: d["MyName"]
    })
  });

  console.log(data_foruse);

  xScale.domain([d3.min(data_foruse, function(d){return d.id}), d3.max(data_foruse, function(d){return d.id})])
  yScale_forX.domain([d3.min(data_foruse, function(d){return d.X}), d3.max(data_foruse, function(d) { return d.X; })]);


  svg_Xvalue.selectAll(".dot")
  .data(data_foruse)
  .enter()
  .append("circle")
        .attr("class", "dot")
        .attr("r", 5)
        .attr("cx", function(d){return xScale(d.id)})
        .attr("cy", function(d){return yScale_forX(d.X)})
        .attr("fill", function(d){return "rgb(161,190,230)";})
  .on("mouseover", function(d){
    d3.select(this)
      .attr("r", 10)
      .attr("fill", function(d){return  "rgb(50,124,203)";});
  })
  .on("mouseout", function(d){
    d3.select(this)
      .attr("r", 5)
      .attr("fill", function(d){return "rgb(161,190,230)";})
  })

  svg_Xvalue.append("path")
  .attr("d", valueline_forX(data_foruse))
  .attr("stroke", "blue")
  .attr("stroke-width", 2)
  .attr("fill", "none");



  xScale.domain([0, d3.max(data_foruse, function(d){return d.id})])
  yScale_forY.domain([d3.min(data_foruse, function(d){return d.Y}), d3.max(data_foruse, function(d) { return d.Y; })]);


  svg_Yvalue.selectAll(".dot")
  .data(data_foruse)
  .enter()
  .append("circle")
        .attr("class", "dot")
        .attr("r", 5)
        .attr("cx", function(d){return xScale(d.id)})
        .attr("cy", function(d){return yScale_forY(d.Y)})
        .attr("fill", function(d){return "rgb(161,190,230)";})
  .on("mouseover", function(d){
    d3.select(this)
      .attr("r", 10)
      .attr("fill", function(d){return  "rgb(50,124,203)";});
  })
  .on("mouseout", function(d){
    d3.select(this)
      .attr("r", 5)
      .attr("fill", function(d){return "rgb(161,190,230)";})
  })

  svg_Yvalue.append("path")
  .attr("d", valueline_forY(data_foruse))
  .attr("stroke", "red")
  .attr("stroke-width", 2)
  .attr("fill", "none")



  });
  


</script>


</body>
</html>
